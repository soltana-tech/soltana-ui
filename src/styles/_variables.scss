// ---------------------------------------------------------------------------
// Design Tokens & CSS Custom Properties
// ---------------------------------------------------------------------------
// Design tokens: spacing, type, shadow, easing, and icon URI generators.
// Cinzel (serif) + Raleway (sans) + JetBrains Mono (mono).
// ---------------------------------------------------------------------------

@use 'sass:list';
@use 'sass:map';
@use 'sass:string';

// ---- Spacing scale (4px base) ----
$spacing-base: 0.25rem;
$spacing-steps: (
  0: 0,
  px: 1px,
  0\.5: 0.125rem,
  1: 0.25rem,
  1\.5: 0.375rem,
  2: 0.5rem,
  2\.5: 0.625rem,
  3: 0.75rem,
  3\.5: 0.875rem,
  4: 1rem,
  5: 1.25rem,
  6: 1.5rem,
  7: 1.75rem,
  8: 2rem,
  9: 2.25rem,
  10: 2.5rem,
  11: 2.75rem,
  12: 3rem,
  14: 3.5rem,
  16: 4rem,
  20: 5rem,
  24: 6rem,
  28: 7rem,
  32: 8rem,
  36: 9rem,
  40: 10rem,
  44: 11rem,
  48: 12rem,
  52: 13rem,
  56: 14rem,
  60: 15rem,
  64: 16rem,
  72: 18rem,
  80: 20rem,
  96: 24rem,
);

// ---- Font size scale ----
$font-sizes: (
  xs: (
    0.75rem,
    1rem,
  ),
  sm: (
    0.875rem,
    1.25rem,
  ),
  base: (
    1rem,
    1.65,
  ),
  lg: (
    1.125rem,
    1.75rem,
  ),
  xl: (
    1.25rem,
    1.75rem,
  ),
  2xl: (
    1.5rem,
    2rem,
  ),
  3xl: (
    1.875rem,
    2.25rem,
  ),
  4xl: (
    2.25rem,
    2.5rem,
  ),
  5xl: (
    3rem,
    1.15,
  ),
  6xl: (
    3.75rem,
    1.1,
  ),
  7xl: (
    4.5rem,
    1.05,
  ),
  8xl: (
    6rem,
    1,
  ),
  9xl: (
    8rem,
    1,
  ),
);

// ---- Font weight scale ----
$font-weights: (
  light: 300,
  regular: 400,
  medium: 500,
  semibold: 600,
  bold: 700,
  extrabold: 800,
  'black': 900,
);

// ---- Border radius scale ----
$radii: (
  none: 0,
  sm: 0.25rem,
  md: 0.5rem,
  default: 0.625rem,
  lg: 0.875rem,
  xl: 1.125rem,
  2xl: 1.25rem,
  3xl: 1.5rem,
  full: 9999px,
);

// ---- Z-index scale ----
$z-indices: (
  0: 0,
  10: 10,
  20: 20,
  30: 30,
  40: 40,
  50: 50,
  dropdown: 100,
  modal: 200,
  tooltip: 300,
  skip-link: 9999,
  auto: auto,
);

// ---- Shadow scale ----
$shadows: (
  sm: '0 1px 2px 0 rgb(0 0 0 / 8%)',
  default: '0 1px 3px 0 rgb(0 0 0 / 12%), 0 1px 2px -1px rgb(0 0 0 / 8%)',
  md: '0 4px 6px -1px rgb(0 0 0 / 12%), 0 2px 4px -2px rgb(0 0 0 / 8%)',
  lg: '0 10px 15px -3px rgb(0 0 0 / 12%), 0 4px 6px -4px rgb(0 0 0 / 8%)',
  xl: '0 20px 25px -5px rgb(0 0 0 / 14%), 0 8px 10px -6px rgb(0 0 0 / 10%)',
  2xl: '0 25px 50px -12px rgb(0 0 0 / 30%)',
  inner: 'inset 0 2px 4px 0 rgb(0 0 0 / 6%)',
  none: 'none',
);

// ---- Transition durations ----
$transitions: (
  fast: 75ms,
  normal: 150ms,
  slow: 300ms,
  slower: 500ms,
);

// ---- Easing functions ----
$easings: (
  in: cubic-bezier(0.4, 0, 1, 1),
  out: cubic-bezier(0, 0, 0.2, 1),
  in-out: cubic-bezier(0.4, 0, 0.2, 1),
);

// ---- Breakpoints ----
$breakpoints: (
  sm: 640px,
  md: 768px,
  lg: 1024px,
  xl: 1280px,
  2xl: 1536px,
);

// ---- Utility scales (shared with responsive) ----
$gap-steps: (0, 1, 2, 3, 4, 5, 6, 8, 10, 12, 16, 20, 24);

$space-keys: (0, 1, 2, 3, 4, 5, 6, 8, 10, 12, 16, 20, 24, 32, 40, 48, 64);

$overflow-values: (auto, hidden, visible, scroll, clip);

$size-fractions: (
  '1\\/2': 50%,
  '1\\/3': 33.333%,
  '2\\/3': 66.667%,
  '1\\/4': 25%,
  '3\\/4': 75%,
  full: 100%,
  screen: 100vw,
  min: min-content,
  max: max-content,
  fit: fit-content,
);

$max-widths: (
  xs: 20rem,
  sm: 24rem,
  md: 28rem,
  lg: 32rem,
  xl: 36rem,
  2xl: 42rem,
  3xl: 48rem,
  4xl: 56rem,
  5xl: 64rem,
  6xl: 72rem,
  7xl: 80rem,
  full: 100%,
  prose: 65ch,
);

// ---- Fluid font sizes (xl+) ----
$fluid-font-sizes: (
  xl: clamp(1.125rem, 1.05rem + 0.25vi, 1.25rem),
  2xl: clamp(1.25rem, 1rem + 0.625vi, 1.5rem),
  3xl: clamp(1.5rem, 1.125rem + 0.94vi, 1.875rem),
  4xl: clamp(1.75rem, 1.25rem + 1.25vi, 2.25rem),
  5xl: clamp(2rem, 1rem + 2.5vi, 3rem),
  6xl: clamp(2.5rem, 1.25rem + 3.13vi, 3.75rem),
  7xl: clamp(3rem, 1.5rem + 3.75vi, 4.5rem),
  8xl: clamp(3.5rem, 1rem + 6.25vi, 6rem),
  9xl: clamp(4.5rem, 1rem + 8.75vi, 8rem),
);

// ---- Icon data-URI generators ----
// Each function embeds a single SVG shape with a parameterized fill/stroke color,
// so theme files can call them with the appropriate contrast color.

@function icon-chevron($color) {
  $c: '%23' + string.slice('#{$color}', 2);
  @return url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='#{$c}' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
}

@function icon-checkmark($color) {
  $c: '%23' + string.slice('#{$color}', 2);
  @return url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='#{$c}' stroke-width='3' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='20 6 9 17 4 12'%3E%3C/polyline%3E%3C/svg%3E");
}

@function icon-radio-dot($color) {
  $c: '%23' + string.slice('#{$color}', 2);
  @return url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Ccircle cx='8' cy='8' r='3.5' fill='#{$c}'/%3E%3C/svg%3E");
}

// ---- CSS custom properties ----
:root {
  // Spacing tokens
  @each $key, $val in $spacing-steps {
    --space-#{$key}: #{$val};
  }

  // Radius tokens
  @each $key, $val in $radii {
    --radius-#{$key}: #{$val};
  }

  // Shadow tokens
  @each $key, $val in $shadows {
    --shadow-#{$key}: #{$val};
  }

  // Transition tokens
  @each $key, $val in $transitions {
    --transition-#{$key}: #{$val};
  }

  // Easing tokens
  @each $key, $val in $easings {
    --easing-#{$key}: #{$val};
  }

  // Z-index tokens
  @each $key, $val in $z-indices {
    @if $val != auto {
      --z-#{$key}: #{$val};
    }
  }

  // Font families
  --font-sans: 'Raleway', ui-sans-serif, system-ui, -apple-system, sans-serif;
  --font-serif: 'Cinzel', 'Georgia', 'Times New Roman', serif;
  --font-display: 'Cinzel Decorative', 'Cinzel', serif;
  --font-mono: 'JetBrains Mono', ui-monospace, 'Cascadia Code', 'Fira Code', monospace;

  // Font sizes
  @each $key, $pair in $font-sizes {
    @if map.has-key($fluid-font-sizes, $key) {
      --text-#{$key}: #{map.get($fluid-font-sizes, $key)};
    } @else {
      --text-#{$key}: #{list.nth($pair, 1)};
    }
    --leading-#{$key}: #{list.nth($pair, 2)};
  }

  // Font weights
  @each $key, $val in $font-weights {
    --font-#{$key}: #{$val};
  }

  // Letter spacing tokens
  --tracking-refined: 0.02em;
  --tracking-elegant: 0.04em;
  --tracking-display: 0.08em;
  --tracking-inscriptional: 0.12em;

  // Static palette
  --color-white: #fff;
  --color-black: #000;
}
