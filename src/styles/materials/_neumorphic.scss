// ---------------------------------------------------------------------------
// Neumorphic Design Utilities — "Polished Stone"
// ---------------------------------------------------------------------------
// Multi-layer soft UI recontextualized as polished stone surfaces.
// Gold accent highlights. Theme-aware via --neu-* custom properties.
// ---------------------------------------------------------------------------

@use '../variables' as *;

// ---- Base mixin ----
@mixin neu-base {
  border: none;
  background: var(--neu-bg);
}

// ============================================================================
// RAISED VARIANTS
// ============================================================================

// Standard raised — 2-layer convex
.neu-raised {
  @include neu-base;
  border-radius: var(--radius-xl);
  box-shadow:
    6px 6px 14px var(--neu-shadow-dark),
    -6px -6px 14px var(--neu-shadow-light);
}

.neu-raised-sm {
  @include neu-base;
  border-radius: var(--radius-lg);
  box-shadow:
    3px 3px 7px var(--neu-shadow-dark),
    -3px -3px 7px var(--neu-shadow-light);
}

.neu-raised-lg {
  @include neu-base;
  border-radius: var(--radius-2xl);
  box-shadow:
    10px 10px 24px var(--neu-shadow-dark),
    -10px -10px 24px var(--neu-shadow-light);
}

// Elevated — 3-layer with mid shadow and highlight top-edge
.neu-elevated {
  @include neu-base;
  border-radius: var(--radius-xl);
  border-top: 1px solid var(--neu-highlight);
  box-shadow:
    0 2px 4px var(--neu-shadow-mid),
    6px 6px 16px var(--neu-shadow-dark),
    -4px -4px 12px var(--neu-shadow-light);
}

// Floating — dramatic elevation with diffuse shadows
.neu-floating {
  @include neu-base;
  border-radius: var(--radius-2xl);
  border-top: 1px solid var(--neu-highlight);
  box-shadow:
    0 4px 8px var(--neu-shadow-mid),
    12px 12px 32px var(--neu-shadow-dark),
    -8px -8px 24px var(--neu-shadow-light);
}

// Soft/Flat — barely perceptible, elegant background treatment
.neu-soft,
.neu-flat {
  @include neu-base;
  border-radius: var(--radius-xl);
  box-shadow:
    2px 2px 6px var(--neu-shadow-dark),
    -2px -2px 6px var(--neu-shadow-light);
}

// ============================================================================
// INSET VARIANTS
// ============================================================================

.neu-inset {
  @include neu-base;
  border-radius: var(--radius-xl);
  box-shadow:
    inset 6px 6px 14px var(--neu-shadow-dark),
    inset -6px -6px 14px var(--neu-shadow-light);
}

.neu-inset-sm {
  @include neu-base;
  border-radius: var(--radius-lg);
  box-shadow:
    inset 3px 3px 7px var(--neu-shadow-dark),
    inset -3px -3px 7px var(--neu-shadow-light);
}

.neu-inset-lg {
  @include neu-base;
  border-radius: var(--radius-2xl);
  box-shadow:
    inset 10px 10px 24px var(--neu-shadow-dark),
    inset -10px -10px 24px var(--neu-shadow-light);
}

// ============================================================================
// INTERACTIVE ELEMENTS
// ============================================================================

// Button — raised that presses on click with accent glow on focus
.neu-button {
  @include neu-base;
  border-radius: var(--radius-xl);
  border-top: 1px solid var(--neu-highlight);
  box-shadow:
    0 2px 4px var(--neu-shadow-mid),
    5px 5px 12px var(--neu-shadow-dark),
    -4px -4px 10px var(--neu-shadow-light);
  transition:
    box-shadow 0.3s ease,
    transform 0.2s ease,
    border-color 0.3s ease;
  cursor: pointer;

  &:hover {
    transform: translateY(-1px);
    box-shadow:
      0 4px 8px var(--neu-shadow-mid),
      6px 6px 16px var(--neu-shadow-dark),
      -5px -5px 12px var(--neu-shadow-light);
  }

  &:active {
    transform: translateY(0) scale(0.98);
    border-top-color: transparent;
    box-shadow:
      inset 4px 4px 10px var(--neu-shadow-dark),
      inset -4px -4px 10px var(--neu-shadow-light);
  }

  &:focus-visible {
    outline: none;
    box-shadow:
      0 0 0 3px var(--state-focus-ring),
      5px 5px 12px var(--neu-shadow-dark),
      -4px -4px 10px var(--neu-shadow-light);
  }
}

// Input field — inset with accent glow on focus
.neu-input {
  @include neu-base;
  border-radius: var(--radius-lg);
  box-shadow:
    inset 3px 3px 8px var(--neu-shadow-dark),
    inset -3px -3px 8px var(--neu-shadow-light);
  padding: 0.625rem 1rem;
  color: var(--text-primary);
  font-family: var(--font-sans);
  font-size: var(--text-base);
  letter-spacing: var(--tracking-refined);

  &::placeholder {
    color: var(--text-muted);
  }

  &:focus {
    outline: none;
    box-shadow:
      inset 3px 3px 8px var(--neu-shadow-dark),
      inset -3px -3px 8px var(--neu-shadow-light),
      0 0 0 3px var(--state-focus-ring);
  }
}

// Toggle — with accent state
.neu-toggle {
  @include neu-base;
  position: relative;
  width: 3.5rem;
  height: 2rem;
  border-radius: var(--radius-full);
  box-shadow:
    inset 4px 4px 10px var(--neu-shadow-dark),
    inset -4px -4px 10px var(--neu-shadow-light);
  cursor: pointer;
  transition: background 0.3s ease;

  &::after {
    content: '';
    position: absolute;
    top: 3px;
    left: 3px;
    width: 1.625rem;
    height: 1.625rem;
    border-radius: var(--radius-full);
    background: var(--neu-bg);
    border-top: 1px solid var(--neu-highlight);
    box-shadow:
      3px 3px 7px var(--neu-shadow-dark),
      -3px -3px 7px var(--neu-shadow-light);
    transition:
      transform 0.3s ease,
      background 0.3s ease,
      box-shadow 0.3s ease;
  }

  &.active::after {
    transform: translateX(1.5rem);
    background: var(--accent-primary);
    box-shadow:
      2px 2px 6px var(--neu-shadow-dark),
      0 0 12px rgb(212 168 67 / 25%);
  }
}

// ============================================================================
// CARDS
// ============================================================================

.neu-card {
  @include neu-base;
  border-radius: var(--radius-2xl);
  border-top: 1px solid var(--neu-highlight);
  padding: 1.5rem;
  box-shadow:
    0 2px 4px var(--neu-shadow-mid),
    8px 8px 20px var(--neu-shadow-dark),
    -6px -6px 16px var(--neu-shadow-light);
}

// Layered card with gold gradient overlay
.neu-card-layered {
  @include neu-base;
  position: relative;
  border-radius: var(--radius-2xl);
  padding: 1.5rem;
  box-shadow:
    0 2px 4px var(--neu-shadow-mid),
    8px 8px 20px var(--neu-shadow-dark),
    -6px -6px 16px var(--neu-shadow-light);
  overflow: hidden;

  &::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(
      135deg,
      rgb(212 168 67 / 5%),
      rgb(168 133 42 / 3%),
      rgb(252 211 77 / 4%)
    );
    border-radius: inherit;
    pointer-events: none;
  }
}

// ============================================================================
// PROGRESS BAR
// ============================================================================

.neu-progress {
  @include neu-base;
  border-radius: var(--radius-full);
  height: 0.75rem;
  box-shadow:
    inset 3px 3px 7px var(--neu-shadow-dark),
    inset -3px -3px 7px var(--neu-shadow-light);
  overflow: hidden;

  &-fill {
    height: 100%;
    border-radius: var(--radius-full);
    background: linear-gradient(90deg, var(--gold-500), var(--gold-400), var(--gold-300));
    box-shadow:
      2px 2px 4px var(--neu-shadow-dark),
      0 0 8px rgb(212 168 67 / 20%);
    transition: width 0.5s ease;
  }
}

// ============================================================================
// PRESSED-ACTIVE STATE — used for interactive selection patterns
// ============================================================================

.neu-pressed-active {
  @include neu-base;
  border-radius: var(--radius-xl);
  box-shadow:
    inset 4px 4px 10px var(--neu-shadow-dark),
    inset -4px -4px 10px var(--neu-shadow-light);
}

// Gold-accented pressed state (use intentionally for premium feel)
.neu-pressed-gold {
  @include neu-base;
  border-radius: var(--radius-xl);
  box-shadow:
    inset 4px 4px 10px var(--neu-shadow-dark),
    inset -4px -4px 10px var(--neu-shadow-light),
    inset 0 0 0 1px var(--border-accent-gold, rgb(212 168 67 / 12%));
}
