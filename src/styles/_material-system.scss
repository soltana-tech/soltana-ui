// ---------------------------------------------------------------------------
// Material System — Unified Material Architecture
// ---------------------------------------------------------------------------
// Central system for switching between neumorphic, glassmorphic, and hybrid
// materials. Uses CSS custom properties and data attributes for runtime
// material switching without JavaScript class manipulation.
// ---------------------------------------------------------------------------

// ============================================================================
// MATERIAL CSS VARIABLES
// ============================================================================
// These variables provide a unified interface for material properties.
// Components use --material-* variables which resolve to the active material.

:root {
  // Material switching variables (default to neumorphic)
  --material-bg: var(--neuro-bg);
  --material-shadow-light: var(--neuro-shadow-light);
  --material-shadow-dark: var(--neuro-shadow-dark);
  --material-shadow-mid: var(--neuro-shadow-mid);
  --material-highlight: var(--neuro-highlight);
  --material-border: var(--border-default);
  --material-blur: 0px;
  --material-saturation: 100%;

  // Ornamental detail variables
  --ornament-color: var(--gold-400);
  --ornament-opacity: 0.5;
  --ornament-size: 18px;

  // Surface treatment variables
  --surface-pattern: none;
  --surface-texture: none;
  --surface-overlay: transparent;
}

// ============================================================================
// MATERIAL DATA ATTRIBUTES — Runtime Material Switching
// ============================================================================
// Apply data-material attribute to any container to switch material system.
// Children inherit the material properties automatically.

[data-material='neuro'] {
  --material-bg: var(--neuro-bg);
  --material-shadow-light: var(--neuro-shadow-light);
  --material-shadow-dark: var(--neuro-shadow-dark);
  --material-shadow-mid: var(--neuro-shadow-mid);
  --material-highlight: var(--neuro-highlight);
  --material-border: var(--border-default);
  --material-blur: 0px;
  --material-saturation: 100%;
}

[data-material='glass'] {
  --material-bg: var(--glass-bg);
  --material-shadow-light: var(--glass-inner-glow);
  --material-shadow-dark: var(--glass-shadow);
  --material-shadow-mid: var(--glass-shadow);
  --material-highlight: var(--glass-inner-glow);
  --material-border: var(--glass-border);
  --material-blur: 16px;
  --material-saturation: 140%;
}

[data-material='hybrid'] {
  --material-bg: linear-gradient(145deg, var(--glass-gradient-start), var(--glass-gradient-end));
  --material-shadow-light: var(--neuro-shadow-light);
  --material-shadow-dark: var(--neuro-shadow-dark);
  --material-shadow-mid: var(--neuro-shadow-mid);
  --material-highlight: var(--glass-inner-glow);
  --material-border: var(--glass-border);
  --material-blur: 12px;
  --material-saturation: 120%;
}

// ============================================================================
// ORNAMENT DATA ATTRIBUTES
// ============================================================================
// Apply data-ornament attribute to add structural details.
// Multiple ornaments can be combined: data-ornament="baroque gilt"

[data-ornament~='baroque'] {
  --ornament-style: baroque;
  position: relative;

  &::before {
    content: '';
    position: absolute;
    inset: 4px;
    border: 1px solid rgb(212 168 67 / 25%);
    border-radius: inherit;
    pointer-events: none;
  }
}

[data-ornament~='carved'] {
  --ornament-style: carved;
  box-shadow:
    inset 2px 2px 6px var(--neuro-shadow-dark),
    inset -2px -2px 6px var(--neuro-shadow-light);
}

[data-ornament~='faceted'] {
  --ornament-style: faceted;
  background-image: linear-gradient(
    135deg,
    rgb(255 255 255 / 8%) 0%,
    transparent 40%,
    transparent 60%,
    rgb(0 0 0 / 5%) 100%
  );
}

[data-ornament~='gilt'] {
  --ornament-style: gilt;
  border: 1px solid var(--gold-400);
  box-shadow: 0 0 8px rgb(212 168 67 / 15%);
}

// ============================================================================
// SURFACE DATA ATTRIBUTES
// ============================================================================
// Apply data-surface attribute to modify surface treatment.

[data-surface='polished'] {
  --surface-pattern: none;
  --surface-texture: none;
}

[data-surface='frosted'] {
  --surface-pattern: none;
  backdrop-filter: blur(24px) saturate(var(--material-saturation));
}

[data-surface='stained'] {
  --surface-pattern: linear-gradient(
    135deg,
    var(--stained-primary),
    var(--stained-secondary),
    var(--stained-accent)
  );
  backdrop-filter: blur(28px) saturate(160%);
}

[data-surface='matte'] {
  --surface-pattern: none;
  backdrop-filter: blur(8px) saturate(90%);
  filter: contrast(0.95);
}

[data-surface='metallic'] {
  --surface-pattern: linear-gradient(
    145deg,
    rgb(255 255 255 / 15%) 0%,
    transparent 40%,
    transparent 60%,
    rgb(0 0 0 / 10%) 100%
  );
}

// ============================================================================
// MATERIAL UTILITY CLASSES
// ============================================================================
// Direct class application for material styling.

.material-neuro {
  background: var(--neuro-bg);
  border: none;
  box-shadow:
    4px 4px 12px var(--neuro-shadow-dark),
    -4px -4px 12px var(--neuro-shadow-light);
}

.material-glass {
  background: var(--glass-bg);
  backdrop-filter: blur(16px) saturate(140%);
  border: 1px solid var(--glass-border);
  box-shadow: 0 8px 32px var(--glass-shadow);
}

.material-hybrid {
  background: linear-gradient(145deg, var(--glass-gradient-start), var(--glass-gradient-end));
  backdrop-filter: blur(12px) saturate(120%);
  border: 1px solid var(--glass-border);
  box-shadow:
    4px 4px 12px var(--neuro-shadow-dark),
    -4px -4px 12px var(--neuro-shadow-light);
}

// ============================================================================
// ORNAMENT UTILITY CLASSES
// ============================================================================
// Direct class application for ornamental styling.

.ornament-baroque {
  position: relative;

  &::before {
    content: '';
    position: absolute;
    inset: 4px;
    border: 1px solid rgb(212 168 67 / 25%);
    border-radius: inherit;
    pointer-events: none;
  }

  &::after {
    content: '';
    position: absolute;
    top: -8px;
    left: 50%;
    transform: translateX(-50%);
    width: 16px;
    height: 16px;
    border-radius: 50%;
    border: 1px solid var(--gold-400);
    background: var(--surface-1, var(--neuro-bg));
    pointer-events: none;
  }
}

.ornament-carved {
  position: relative;
  border: 2px solid var(--border-strong);
  box-shadow:
    inset 2px 2px 6px var(--neuro-shadow-dark),
    inset -2px -2px 6px var(--neuro-shadow-light);

  &::before {
    content: '';
    position: absolute;
    inset: -1px;
    border-radius: inherit;
    border: 1px solid rgb(255 255 255 / 10%);
    border-bottom-color: rgb(0 0 0 / 8%);
    border-right-color: rgb(0 0 0 / 8%);
    pointer-events: none;
  }
}

.ornament-faceted {
  position: relative;
  overflow: hidden;

  &::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(
      135deg,
      rgb(255 255 255 / 12%) 0%,
      transparent 30%,
      transparent 70%,
      rgb(0 0 0 / 8%) 100%
    );
    pointer-events: none;
  }

  &::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 50%;
    background: linear-gradient(180deg, rgb(255 255 255 / 8%) 0%, transparent 100%);
    pointer-events: none;
  }
}

.ornament-gilt {
  border: 1px solid var(--gold-400);
  box-shadow:
    0 0 0 1px var(--gold-600),
    0 0 8px rgb(212 168 67 / 20%);
}

.ornament-chiseled {
  position: relative;
  border: 2px solid var(--border-default);

  &::before {
    content: '';
    position: absolute;
    inset: 0;
    border: 1px solid;
    border-color: rgb(255 255 255 / 15%) rgb(0 0 0 / 8%) rgb(0 0 0 / 8%) rgb(255 255 255 / 15%);
    pointer-events: none;
  }
}

// ============================================================================
// MATERIAL-AWARE COMPONENT BASE
// ============================================================================
// Base class that automatically adapts to the active material system.

.material-aware {
  background: var(--material-bg);
  border: 1px solid var(--material-border);
  backdrop-filter: blur(var(--material-blur)) saturate(var(--material-saturation));
  box-shadow:
    4px 4px 12px var(--material-shadow-dark),
    -4px -4px 12px var(--material-shadow-light);
  transition:
    background 0.3s ease,
    box-shadow 0.3s ease,
    border-color 0.3s ease,
    backdrop-filter 0.3s ease;
}

.material-aware-raised {
  @extend .material-aware;
  border-top: 1px solid var(--material-highlight);
}

.material-aware-inset {
  background: var(--material-bg);
  border: 1px solid var(--material-border);
  backdrop-filter: blur(var(--material-blur)) saturate(var(--material-saturation));
  box-shadow:
    inset 4px 4px 12px var(--material-shadow-dark),
    inset -4px -4px 12px var(--material-shadow-light);
}

// ============================================================================
// THEME-BASED MATERIAL DEFAULTS
// ============================================================================
// Automatically apply appropriate material based on theme.

[data-theme='light'] {
  // Light mode defaults to neumorphic (polished marble)
  &:not([data-material]) {
    --material-bg: var(--neuro-bg);
    --material-shadow-light: var(--neuro-shadow-light);
    --material-shadow-dark: var(--neuro-shadow-dark);
    --material-blur: 0px;
  }
}

[data-theme='dark'] {
  // Dark mode defaults to glassmorphic (crystal palace at night)
  &:not([data-material]) {
    --material-bg: var(--glass-bg);
    --material-shadow-light: var(--glass-inner-glow);
    --material-shadow-dark: var(--glass-shadow);
    --material-blur: 16px;
  }
}

[data-theme='sepia'] {
  // Sepia mode defaults to neumorphic with warm tones
  &:not([data-material]) {
    --material-bg: var(--neuro-bg);
    --material-shadow-light: var(--neuro-shadow-light);
    --material-shadow-dark: var(--neuro-shadow-dark);
    --material-blur: 0px;
  }
}

// ============================================================================
// ACCESSIBILITY — High Contrast Mode
// ============================================================================
// Removes transparency and complex effects for better visibility.

@media (prefers-contrast: more) {
  [data-material='glass'],
  .material-glass {
    background: var(--surface-1);
    backdrop-filter: none;
    border: 2px solid var(--border-strong);
  }

  [data-material='hybrid'],
  .material-hybrid {
    background: var(--surface-1);
    backdrop-filter: none;
    border: 2px solid var(--border-strong);
  }
}

// ============================================================================
// REDUCED MOTION — Disable transitions
// ============================================================================

@media (prefers-reduced-motion: reduce) {
  .material-aware,
  .material-aware-raised,
  .material-aware-inset {
    transition: none;
  }
}

// ============================================================================
// BROWSER FALLBACKS
// ============================================================================
// Provide solid backgrounds for browsers without backdrop-filter support.

@supports not (backdrop-filter: blur(1px)) {
  [data-material='glass'],
  .material-glass {
    background: var(--surface-1);
  }

  [data-material='hybrid'],
  .material-hybrid {
    background: var(--surface-1);
  }
}
