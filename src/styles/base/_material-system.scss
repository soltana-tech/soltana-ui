// ---------------------------------------------------------------------------
// Material System
// ---------------------------------------------------------------------------
// Owns three layers of the design system abstraction:
// 1. MATERIAL PRIMITIVES (--neu-*, --glass-*, --metallic-*, --stone-*)
//    Derived from theme channel tokens (--shadow-color, --highlight-color).
//    Per-theme overrides handle materials with unique color bases.
// 2. MATERIAL TOKENS (--material-bg, --material-shadow-*, --material-border)
//    Set by [data-material] selectors, consumed by all components.
// 3. SURFACE TOKENS (--surface-blur, --surface-saturation, etc.)
//    Set by [data-surface] selectors. Orthogonal to materials.
// Materials define depth and structure. Surfaces define finish and texture.
// The two tiers are orthogonal — every combination produces a valid result.
// ---------------------------------------------------------------------------

// ============================================================================
// MATERIAL PRIMITIVES
// ============================================================================
// Derived from theme channel tokens (--shadow-color, --highlight-color).
// Per-theme overrides below handle materials whose base colors differ.
// Consumed by material selectors and material utility files.
// ============================================================================

:root {
  // Neumorphic
  --neu-bg: var(--surface-2);
  --neu-shadow-dark: rgb(var(--shadow-color) / 65%);
  --neu-shadow-light: rgb(var(--highlight-color) / 5%);
  --neu-shadow-mid: rgb(var(--shadow-color) / 40%);
  --neu-highlight: rgb(var(--highlight-color) / 8%);
  --neu-accent-glow: var(--accent-glow);

  // Glassmorphic
  --glass-bg: rgb(14 16 40 / 35%);
  --glass-border: rgb(var(--highlight-color) / 8%);
  --glass-shadow: rgb(var(--shadow-color) / 45%);
  --glass-gradient-start: rgb(var(--highlight-color) / 8%);
  --glass-gradient-end: rgb(var(--highlight-color) / 3%);
  --glass-inner-glow: rgb(var(--highlight-color) / 10%);

  // Metallic
  --metallic-shadow: rgb(var(--shadow-color) / 50%);
  --metallic-highlight: rgb(var(--highlight-color) / 20%);
  --metallic-border: rgb(var(--highlight-color) / 15%);

  // Stone
  --stone-shadow: rgb(var(--shadow-color) / 40%);
  --stone-highlight: rgb(var(--highlight-color) / 8%);
  --stone-border: rgb(var(--highlight-color) / 6%);
}

[data-theme='light'] {
  // Neumorphic — inverted depth (strong highlights, soft shadows)
  --neu-bg: var(--surface-3);
  --neu-shadow-dark: rgb(var(--shadow-color) / 35%);
  --neu-shadow-light: rgb(var(--highlight-color) / 88%);
  --neu-shadow-mid: rgb(var(--shadow-color) / 20%);
  --neu-highlight: rgb(var(--highlight-color) / 65%);

  // Glassmorphic
  --glass-bg: rgb(var(--highlight-color) / 35%);
  --glass-border: rgb(146 156 176 / 15%); // blue-gray
  --glass-shadow: rgb(85 97 120 / 10%); // darker blue-gray
  --glass-gradient-start: rgb(var(--highlight-color) / 50%);
  --glass-gradient-end: rgb(238 240 245 / 30%); // surface-2 channels
  --glass-inner-glow: rgb(var(--highlight-color) / 45%);

  // Metallic
  --metallic-shadow: rgb(0 0 0 / 20%); // pure black
  --metallic-highlight: rgb(var(--highlight-color) / 70%);
  --metallic-border: rgb(var(--shadow-color) / 20%);

  // Stone
  --stone-shadow: rgb(var(--shadow-color) / 30%);
  --stone-highlight: rgb(var(--highlight-color) / 50%);
  --stone-border: rgb(var(--shadow-color) / 12%);
}

[data-theme='sepia'] {
  // Neumorphic — warm parchment depth
  --neu-shadow-dark: rgb(var(--shadow-color) / 45%);
  --neu-shadow-light: rgb(var(--highlight-color) / 82%);
  --neu-shadow-mid: rgb(var(--shadow-color) / 28%);
  --neu-highlight: rgb(var(--highlight-color) / 58%);

  // Glassmorphic
  --glass-bg: rgb(232 220 192 / 45%); // surface-bg channels
  --glass-border: rgb(160 110 43 / 18%); // accent-primary channels
  --glass-shadow: rgb(94 63 27 / 14%); // warm brown
  --glass-gradient-start: rgb(var(--highlight-color) / 55%);
  --glass-gradient-end: rgb(232 220 192 / 28%); // surface-bg channels
  --glass-inner-glow: rgb(var(--highlight-color) / 48%);

  // Metallic — warm bronze
  --metallic-shadow: rgb(60 50 35 / 35%); // warm dark
  --metallic-highlight: rgb(255 245 220 / 30%); // warm white
  --metallic-border: rgb(160 110 43 / 22%); // accent channels

  // Stone
  --stone-shadow: rgb(var(--shadow-color) / 35%);
  --stone-highlight: rgb(var(--highlight-color) / 40%);
  --stone-border: rgb(var(--shadow-color) / 14%);
}

// ============================================================================
// DEFAULT VALUES (neumorphic baseline — primitives defined above)
// ============================================================================
// Ensures components render correctly even without initSoltana().

:root {
  // Material defaults (neumorphic baseline)
  --material-bg: var(--neu-bg);
  --material-shadow-sm: 2px 2px 5px var(--neu-shadow-dark), -2px -2px 5px var(--neu-shadow-light);
  --material-shadow: 3px 3px 8px var(--neu-shadow-dark), -3px -3px 8px var(--neu-shadow-light);
  --material-shadow-lg: 6px 6px 16px var(--neu-shadow-dark), -5px -5px 14px var(--neu-shadow-light);
  --material-shadow-inset-sm:
    inset 1px 1px 3px var(--neu-shadow-dark), inset -1px -1px 3px var(--neu-shadow-light);
  --material-shadow-inset:
    inset 2px 2px 5px var(--neu-shadow-dark), inset -2px -2px 5px var(--neu-shadow-light);
  --material-shadow-inset-lg:
    inset 4px 4px 10px var(--neu-shadow-dark), inset -4px -4px 10px var(--neu-shadow-light);
  --material-border: var(--border-default);

  // Surface defaults (polished baseline)
  --surface-blur: 0px;
  --surface-saturation: 100%;
  --surface-opacity: 1;
  --surface-texture-opacity: 0;
  --surface-overlay: none;
  --surface-sheen: none;
}

// ============================================================================
// MATERIAL SELECTORS
// ============================================================================
// Data-attribute selectors activated by initSoltana().
// Class selectors available for per-element overrides.

[data-material='neu'],
.material-neu {
  --material-bg: var(--neu-bg);
  --material-shadow-sm: 2px 2px 5px var(--neu-shadow-dark), -2px -2px 5px var(--neu-shadow-light);
  --material-shadow: 3px 3px 8px var(--neu-shadow-dark), -3px -3px 8px var(--neu-shadow-light);
  --material-shadow-lg: 6px 6px 16px var(--neu-shadow-dark), -5px -5px 14px var(--neu-shadow-light);
  --material-shadow-inset-sm:
    inset 1px 1px 3px var(--neu-shadow-dark), inset -1px -1px 3px var(--neu-shadow-light);
  --material-shadow-inset:
    inset 2px 2px 5px var(--neu-shadow-dark), inset -2px -2px 5px var(--neu-shadow-light);
  --material-shadow-inset-lg:
    inset 4px 4px 10px var(--neu-shadow-dark), inset -4px -4px 10px var(--neu-shadow-light);
  --material-border: var(--border-default);
}

[data-material='glass'],
.material-glass {
  --material-bg: var(--glass-bg);
  --material-shadow-sm: 0 4px 16px var(--glass-shadow);
  --material-shadow: 0 8px 32px var(--glass-shadow);
  --material-shadow-lg: 0 16px 48px var(--glass-shadow);
  --material-shadow-inset-sm: inset 0 1px 0 var(--glass-inner-glow);
  --material-shadow-inset: inset 0 1px 0 var(--glass-inner-glow);
  --material-shadow-inset-lg:
    inset 0 2px 0 var(--glass-inner-glow), inset 0 0 12px var(--glass-shadow);
  --material-border: var(--glass-border);
}

[data-material='flat'],
.material-flat {
  --material-bg: var(--surface-1);
  --material-shadow-sm: none;
  --material-shadow: none;
  --material-shadow-lg: none;
  --material-shadow-inset-sm: none;
  --material-shadow-inset: none;
  --material-shadow-inset-lg: none;
  --material-border: 1px solid var(--border-default);
}

[data-material='soft'],
.material-soft {
  --material-bg: var(--surface-1);
  --material-shadow-sm: 0 1px 2px rgb(0 0 0 / 5%);
  --material-shadow: 0 1px 3px rgb(0 0 0 / 8%), 0 1px 2px rgb(0 0 0 / 6%);
  --material-shadow-lg: 0 4px 8px rgb(0 0 0 / 10%), 0 2px 4px rgb(0 0 0 / 6%);
  --material-shadow-inset-sm: inset 0 1px 0 rgb(255 255 255 / 3%);
  --material-shadow-inset: inset 0 1px 0 rgb(255 255 255 / 4%);
  --material-shadow-inset-lg: inset 0 2px 0 rgb(255 255 255 / 5%), inset 0 -1px 0 rgb(0 0 0 / 5%);
  --material-border: 1px solid var(--border-subtle);
}

[data-material='metallic'],
.material-metallic {
  --material-bg: var(--surface-1);
  --material-shadow-sm: 0 1px 4px var(--metallic-shadow);
  --material-shadow: 0 2px 8px var(--metallic-shadow), 0 0 1px var(--metallic-shadow);
  --material-shadow-lg: 0 4px 16px var(--metallic-shadow), 0 0 2px var(--metallic-shadow);
  --material-shadow-inset-sm: inset 0 1px 0 var(--metallic-highlight);
  --material-shadow-inset: inset 0 1px 0 var(--metallic-highlight), inset 0 -1px 0 rgb(0 0 0 / 10%);
  --material-shadow-inset-lg:
    inset 0 2px 0 var(--metallic-highlight), inset 0 -2px 0 rgb(0 0 0 / 12%);
  --material-border: 1px solid var(--metallic-border);
}

[data-material='stone'],
.material-stone {
  --material-bg: var(--surface-2);
  --material-shadow-sm: 0 1px 3px var(--stone-shadow);
  --material-shadow: 0 2px 6px var(--stone-shadow);
  --material-shadow-lg: 0 4px 12px var(--stone-shadow);
  --material-shadow-inset-sm:
    inset 1px 1px 1px var(--stone-highlight), inset -1px -1px 1px var(--stone-shadow);
  --material-shadow-inset:
    inset 1px 1px 2px var(--stone-highlight), inset -1px -1px 2px var(--stone-shadow);
  --material-shadow-inset-lg:
    inset 2px 2px 4px var(--stone-highlight), inset -2px -2px 4px var(--stone-shadow);
  --material-border: 1px solid var(--stone-border);
}

// ============================================================================
// SURFACE SELECTORS
// ============================================================================

[data-surface='polished'],
.surface-polished {
  --surface-blur: 0px;
  --surface-saturation: 100%;
  --surface-opacity: 1;
  --surface-texture-opacity: 0;
  --surface-overlay: none;
  --surface-sheen: none;
}

[data-surface='frosted'],
.surface-frosted {
  --surface-blur: 24px;
  --surface-saturation: 80%;
  --surface-opacity: 0.7;
  --surface-texture-opacity: 0.06;
}

[data-surface='stained'],
.surface-stained {
  --surface-blur: 28px;
  --surface-saturation: 100%;
  --surface-opacity: 1;
  --material-bg: linear-gradient(
    135deg,
    var(--stained-primary),
    var(--stained-secondary),
    var(--stained-accent)
  );
  --material-border: 2px solid rgb(40 35 30 / 40%);
  --surface-overlay: linear-gradient(
    135deg,
    rgb(212 168 67 / 6%),
    rgb(168 85 247 / 5%),
    rgb(16 185 129 / 4%)
  );
}

[data-surface='metallic'],
.surface-metallic {
  --surface-blur: 0px;
  --surface-saturation: 100%;
  --surface-opacity: 1;
  --material-bg: linear-gradient(
    145deg,
    rgb(255 255 255 / 15%) 0%,
    transparent 40%,
    transparent 60%,
    rgb(0 0 0 / 10%) 100%
  );
  --surface-sheen: linear-gradient(
    145deg,
    rgb(255 255 255 / 12%) 0%,
    transparent 35%,
    transparent 65%,
    rgb(0 0 0 / 8%) 100%
  );
}

// ============================================================================
// ORNAMENT SELECTORS (opt-in via .ornament class)
// ============================================================================
// Ornaments apply only to elements with .ornament or .ornament-* classes.
// Config-default: .ornament reads the active ornament from [data-ornament].
// Explicit override: .ornament-baroque forces baroque regardless of config.
// All implementations use box-shadow — no ::before/::after conflicts.
// Each includes var(--material-shadow) so material depth is preserved.
// ============================================================================

// ---- Config-default (reads from [data-ornament] on <html>) ----

[data-ornament='baroque'] .ornament {
  box-shadow:
    var(--material-shadow),
    inset 0 0 0 3px var(--border-accent-gold, rgb(212 168 67 / 25%)),
    0 0 8px var(--accent-glow, rgb(212 168 67 / 15%));
}

[data-ornament='carved'] .ornament {
  box-shadow:
    var(--material-shadow),
    inset 1px 1px 0 rgb(var(--highlight-color) / 12%),
    inset -1px -1px 0 rgb(var(--shadow-color) / 10%);
}

[data-ornament='faceted'] .ornament {
  box-shadow:
    var(--material-shadow),
    inset 3px 3px 6px rgb(var(--highlight-color) / 8%),
    inset -2px -2px 4px rgb(var(--shadow-color) / 5%);
}

[data-ornament='gilt'] .ornament {
  box-shadow:
    var(--material-shadow),
    inset 0 0 0 2px var(--border-accent-gold, rgb(212 168 67 / 20%)),
    0 0 0 1px var(--accent-gold, #d4a843),
    0 0 12px var(--accent-glow, rgb(212 168 67 / 15%));
}

// ---- Explicit per-element overrides ----
// Comma selector ensures these win over config-default at any specificity.

.ornament-baroque,
.ornament.ornament-baroque {
  box-shadow:
    var(--material-shadow),
    inset 0 0 0 3px var(--border-accent-gold, rgb(212 168 67 / 25%)),
    0 0 8px var(--accent-glow, rgb(212 168 67 / 15%));
}

.ornament-carved,
.ornament.ornament-carved {
  box-shadow:
    var(--material-shadow),
    inset 1px 1px 0 rgb(var(--highlight-color) / 12%),
    inset -1px -1px 0 rgb(var(--shadow-color) / 10%);
}

.ornament-faceted,
.ornament.ornament-faceted {
  box-shadow:
    var(--material-shadow),
    inset 3px 3px 6px rgb(var(--highlight-color) / 8%),
    inset -2px -2px 4px rgb(var(--shadow-color) / 5%);
}

.ornament-gilt,
.ornament.ornament-gilt {
  box-shadow:
    var(--material-shadow),
    inset 0 0 0 2px var(--border-accent-gold, rgb(212 168 67 / 20%)),
    0 0 0 1px var(--accent-gold, #d4a843),
    0 0 12px var(--accent-glow, rgb(212 168 67 / 15%));
}
