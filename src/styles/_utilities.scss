// ---------------------------------------------------------------------------
// CSS Utility Classes
// ---------------------------------------------------------------------------
// Layout, spacing, sizing, display, color background/border, and misc helpers.
// ---------------------------------------------------------------------------

@use 'variables' as *;

// ============================================================================
// DISPLAY
// ============================================================================
.block {
  display: block;
}

.inline-block {
  display: inline-block;
}

.inline {
  display: inline;
}

.hidden {
  display: none;
}

.contents {
  display: contents;
}

// ============================================================================
// FLEXBOX
// ============================================================================
.flex {
  display: flex;
}

.inline-flex {
  display: inline-flex;
}

.flex-row {
  flex-direction: row;
}

.flex-col {
  flex-direction: column;
}

.flex-row-reverse {
  flex-direction: row-reverse;
}

.flex-col-reverse {
  flex-direction: column-reverse;
}

.flex-wrap {
  flex-wrap: wrap;
}

.flex-nowrap {
  flex-wrap: nowrap;
}

.flex-1 {
  flex: 1 1 0%;
}

.flex-auto {
  flex: 1 1 auto;
}

.flex-initial {
  flex: 0 1 auto;
}

.flex-none {
  flex: none;
}

.grow {
  flex-grow: 1;
}

.grow-0 {
  flex-grow: 0;
}

.shrink {
  flex-shrink: 1;
}

.shrink-0 {
  flex-shrink: 0;
}

// ---- Alignment ----
.items-start {
  align-items: flex-start;
}

.items-center {
  align-items: center;
}

.items-end {
  align-items: flex-end;
}

.items-baseline {
  align-items: baseline;
}

.items-stretch {
  align-items: stretch;
}

.justify-start {
  justify-content: flex-start;
}

.justify-center {
  justify-content: center;
}

.justify-end {
  justify-content: flex-end;
}

.justify-between {
  justify-content: space-between;
}

.justify-around {
  justify-content: space-around;
}

.justify-evenly {
  justify-content: space-evenly;
}

.self-auto {
  align-self: auto;
}

.self-start {
  align-self: flex-start;
}

.self-center {
  align-self: center;
}

.self-end {
  align-self: flex-end;
}

.self-stretch {
  align-self: stretch;
}

// ============================================================================
// GRID
// ============================================================================
.grid {
  display: grid;
}

.inline-grid {
  display: inline-grid;
}

@for $i from 1 through 12 {
  .grid-cols-#{$i} {
    grid-template-columns: repeat(#{$i}, minmax(0, 1fr));
  }
  .col-span-#{$i} {
    grid-column: span #{$i} / span #{$i};
  }
}

.col-span-full {
  grid-column: 1 / -1;
}

@for $i from 1 through 6 {
  .grid-rows-#{$i} {
    grid-template-rows: repeat(#{$i}, minmax(0, 1fr));
  }
  .row-span-#{$i} {
    grid-row: span #{$i} / span #{$i};
  }
}

// ============================================================================
// GAP
// ============================================================================
$gap-steps: (0, 1, 2, 3, 4, 5, 6, 8, 10, 12, 16, 20, 24);

@each $step in $gap-steps {
  .gap-#{$step} {
    gap: calc(#{$step} * 0.25rem);
  }
  .gap-x-#{$step} {
    column-gap: calc(#{$step} * 0.25rem);
  }
  .gap-y-#{$step} {
    row-gap: calc(#{$step} * 0.25rem);
  }
}

// ============================================================================
// SPACING (Margin & Padding)
// ============================================================================
$space-keys: (0, 1, 2, 3, 4, 5, 6, 8, 10, 12, 16, 20, 24, 32, 40, 48, 64);

@each $step in $space-keys {
  $val: calc(#{$step} * 0.25rem);

  // Padding
  .p-#{$step} {
    padding: $val;
  }
  .px-#{$step} {
    padding-left: $val;
    padding-right: $val;
  }
  .py-#{$step} {
    padding-top: $val;
    padding-bottom: $val;
  }
  .pt-#{$step} {
    padding-top: $val;
  }
  .pr-#{$step} {
    padding-right: $val;
  }
  .pb-#{$step} {
    padding-bottom: $val;
  }
  .pl-#{$step} {
    padding-left: $val;
  }

  // Margin
  .m-#{$step} {
    margin: $val;
  }
  .mx-#{$step} {
    margin-left: $val;
    margin-right: $val;
  }
  .my-#{$step} {
    margin-top: $val;
    margin-bottom: $val;
  }
  .mt-#{$step} {
    margin-top: $val;
  }
  .mr-#{$step} {
    margin-right: $val;
  }
  .mb-#{$step} {
    margin-bottom: $val;
  }
  .ml-#{$step} {
    margin-left: $val;
  }
}

.mx-auto {
  margin-left: auto;
  margin-right: auto;
}

.ml-auto {
  margin-left: auto;
}

.mr-auto {
  margin-right: auto;
}

// ============================================================================
// SIZING
// ============================================================================
$size-fractions: (
  '1\\/2': 50%,
  '1\\/3': 33.333%,
  '2\\/3': 66.667%,
  '1\\/4': 25%,
  '3\\/4': 75%,
  full: 100%,
  screen: 100vw,
  min: min-content,
  max: max-content,
  fit: fit-content,
);

@each $name, $val in $size-fractions {
  .w-#{$name} {
    width: $val;
  }
}
@each $name, $val in $size-fractions {
  .h-#{$name} {
    height: $val;
  }
}

.h-screen {
  height: 100vh;
}

.min-h-0 {
  min-height: 0;
}

.min-h-full {
  min-height: 100%;
}

.min-h-screen {
  min-height: 100vh;
}

.max-w-xs {
  max-width: 20rem;
}

.max-w-sm {
  max-width: 24rem;
}

.max-w-md {
  max-width: 28rem;
}

.max-w-lg {
  max-width: 32rem;
}

.max-w-xl {
  max-width: 36rem;
}

.max-w-2xl {
  max-width: 42rem;
}

.max-w-3xl {
  max-width: 48rem;
}

.max-w-4xl {
  max-width: 56rem;
}

.max-w-5xl {
  max-width: 64rem;
}

.max-w-6xl {
  max-width: 72rem;
}

.max-w-7xl {
  max-width: 80rem;
}

.max-w-full {
  max-width: 100%;
}

.max-w-prose {
  max-width: 65ch;
}

// Fixed sizes (in 0.25rem increments)
@each $step in $space-keys {
  .w-#{$step} {
    width: calc(#{$step} * 0.25rem);
  }
  .h-#{$step} {
    height: calc(#{$step} * 0.25rem);
  }
}

// ============================================================================
// CONTAINER
// ============================================================================
.container {
  width: 100%;
  margin-left: auto;
  margin-right: auto;
  padding-left: 1rem;
  padding-right: 1rem;

  @each $key, $val in $breakpoints {
    @media (min-width: #{$val}) {
      max-width: $val;
    }
  }
}

// ============================================================================
// POSITIONING
// ============================================================================
.relative {
  position: relative;
}

.absolute {
  position: absolute;
}

.fixed {
  position: fixed;
}

.sticky {
  position: sticky;
}

.static {
  position: static;
}

.inset-0 {
  inset: 0;
}

.top-0 {
  top: 0;
}

.right-0 {
  right: 0;
}

.bottom-0 {
  bottom: 0;
}

.left-0 {
  left: 0;
}

// ============================================================================
// OVERFLOW
// ============================================================================
.overflow-auto {
  overflow: auto;
}

.overflow-hidden {
  overflow: hidden;
}

.overflow-visible {
  overflow: visible;
}

.overflow-scroll {
  overflow: scroll;
}

.overflow-x-auto {
  overflow-x: auto;
}

.overflow-y-auto {
  overflow-y: auto;
}

// ============================================================================
// BORDER RADIUS
// ============================================================================
@each $key, $val in $radii {
  @if $key == 'DEFAULT' {
    .rounded {
      border-radius: $val;
    }
  } @else {
    .rounded-#{$key} {
      border-radius: $val;
    }
  }
}

// ============================================================================
// BORDER
// ============================================================================
.border {
  border: 1px solid var(--border-default);
}

.border-0 {
  border: 0;
}

.border-2 {
  border: 2px solid var(--border-default);
}

.border-t {
  border-top: 1px solid var(--border-default);
}

.border-b {
  border-bottom: 1px solid var(--border-default);
}

.border-l {
  border-left: 1px solid var(--border-default);
}

.border-r {
  border-right: 1px solid var(--border-default);
}

.border-subtle {
  border-color: var(--border-subtle);
}

.border-strong {
  border-color: var(--border-strong);
}

.border-accent {
  border-color: var(--accent-primary);
}

// ============================================================================
// BACKGROUND COLOR UTILITIES
// ============================================================================
.bg-surface {
  background-color: var(--surface-bg);
}

.bg-surface-1 {
  background-color: var(--surface-1);
}

.bg-surface-2 {
  background-color: var(--surface-2);
}

.bg-surface-3 {
  background-color: var(--surface-3);
}

.bg-surface-4 {
  background-color: var(--surface-4);
}

.bg-accent {
  background-color: var(--accent-primary);
}

.bg-accent-secondary {
  background-color: var(--accent-secondary);
}

.bg-success {
  background-color: var(--color-success);
}

.bg-success-subtle {
  background-color: var(--color-success-subtle);
}

.bg-warning {
  background-color: var(--color-warning);
}

.bg-warning-subtle {
  background-color: var(--color-warning-subtle);
}

.bg-error {
  background-color: var(--color-error);
}

.bg-error-subtle {
  background-color: var(--color-error-subtle);
}

.bg-info {
  background-color: var(--color-info);
}

.bg-info-subtle {
  background-color: var(--color-info-subtle);
}

// Dracula raw colors as backgrounds
.bg-dracula-bg {
  background-color: var(--dracula-bg);
}

.bg-dracula-current {
  background-color: var(--dracula-current);
}

.bg-dracula-cyan {
  background-color: var(--dracula-cyan);
}

.bg-dracula-green {
  background-color: var(--dracula-green);
}

.bg-dracula-orange {
  background-color: var(--dracula-orange);
}

.bg-dracula-pink {
  background-color: var(--dracula-pink);
}

.bg-dracula-purple {
  background-color: var(--dracula-purple);
}

.bg-dracula-red {
  background-color: var(--dracula-red);
}

.bg-dracula-yellow {
  background-color: var(--dracula-yellow);
}

// Pastel backgrounds
.bg-pastel-lilac {
  background-color: var(--pastel-lilac);
}

.bg-pastel-peach {
  background-color: var(--pastel-peach);
}

.bg-pastel-mint {
  background-color: var(--pastel-mint);
}

.bg-pastel-blush {
  background-color: var(--pastel-blush);
}

.bg-pastel-sky {
  background-color: var(--pastel-sky);
}

.bg-pastel-lemon {
  background-color: var(--pastel-lemon);
}

.bg-pastel-lavender {
  background-color: var(--pastel-lavender);
}

.bg-pastel-rose {
  background-color: var(--pastel-rose);
}

.bg-pastel-sage {
  background-color: var(--pastel-sage);
}

.bg-pastel-coral {
  background-color: var(--pastel-coral);
}

// Sepia backgrounds
.bg-sepia-cream {
  background-color: var(--sepia-cream);
}

.bg-sepia-parchment {
  background-color: var(--sepia-parchment);
}

.bg-sepia-tan {
  background-color: var(--sepia-tan);
}

.bg-sepia-sand {
  background-color: var(--sepia-sand);
}

.bg-sepia-coffee {
  background-color: var(--sepia-coffee);
}

.bg-sepia-chocolate {
  background-color: var(--sepia-chocolate);
}

// ============================================================================
// OPACITY
// ============================================================================
$opacities: (0, 5, 10, 20, 25, 30, 40, 50, 60, 70, 75, 80, 90, 95, 100);

@each $val in $opacities {
  .opacity-#{$val} {
    opacity: calc(#{$val} / 100);
  }
}

// ============================================================================
// SHADOWS
// ============================================================================
.shadow-sm {
  box-shadow: var(--shadow-sm);
}

.shadow {
  box-shadow: var(--shadow-DEFAULT);
}

.shadow-md {
  box-shadow: var(--shadow-md);
}

.shadow-lg {
  box-shadow: var(--shadow-lg);
}

.shadow-xl {
  box-shadow: var(--shadow-xl);
}

.shadow-2xl {
  box-shadow: var(--shadow-2xl);
}

.shadow-inner {
  box-shadow: var(--shadow-inner);
}

.shadow-none {
  box-shadow: var(--shadow-none);
}

// ============================================================================
// Z-INDEX
// ============================================================================
@each $key, $val in $z-indices {
  .z-#{$key} {
    z-index: $val;
  }
}

// ============================================================================
// TRANSITION
// ============================================================================
.transition {
  transition-property:
    color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow,
    transform, filter, backdrop-filter;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  transition-duration: var(--transition-normal);
}

.transition-all {
  transition-property: all;
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  transition-duration: var(--transition-normal);
}

.transition-none {
  transition-property: none;
}

.duration-fast {
  transition-duration: var(--transition-fast);
}

.duration-normal {
  transition-duration: var(--transition-normal);
}

.duration-slow {
  transition-duration: var(--transition-slow);
}

.duration-slower {
  transition-duration: var(--transition-slower);
}

.ease-in {
  transition-timing-function: cubic-bezier(0.4, 0, 1, 1);
}

.ease-out {
  transition-timing-function: cubic-bezier(0, 0, 0.2, 1);
}

.ease-in-out {
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
}

// ============================================================================
// TRANSFORMS
// ============================================================================
.scale-95 {
  transform: scale(0.95);
}

.scale-100 {
  transform: scale(1);
}

.scale-105 {
  transform: scale(1.05);
}

.scale-110 {
  transform: scale(1.1);
}

.rotate-45 {
  transform: rotate(45deg);
}

.rotate-90 {
  transform: rotate(90deg);
}

.rotate-180 {
  transform: rotate(180deg);
}

.-rotate-45 {
  transform: rotate(-45deg);
}

.-rotate-90 {
  transform: rotate(-90deg);
}

// ============================================================================
// CURSOR
// ============================================================================
.cursor-pointer {
  cursor: pointer;
}

.cursor-default {
  cursor: default;
}

.cursor-not-allowed {
  cursor: not-allowed;
}

.cursor-grab {
  cursor: grab;
}

// ============================================================================
// POINTER EVENTS
// ============================================================================
.pointer-events-none {
  pointer-events: none;
}

.pointer-events-auto {
  pointer-events: auto;
}

// ============================================================================
// USER SELECT
// ============================================================================
.select-none {
  user-select: none;
}

.select-text {
  user-select: text;
}

.select-all {
  user-select: all;
}

// ============================================================================
// VISIBILITY
// ============================================================================
.visible {
  visibility: visible;
}

.invisible {
  visibility: hidden;
}

// ============================================================================
// FOCUS & INTERACTIVE STATE UTILITIES
// ============================================================================
.focus-ring {
  &:focus-visible {
    outline: 2px solid var(--accent-primary);
    outline-offset: 2px;
  }
}

.focus-ring-inset {
  &:focus-visible {
    outline: 2px solid var(--accent-primary);
    outline-offset: -2px;
  }
}

// ============================================================================
// SCREEN READER ONLY
// ============================================================================
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip-path: inset(50%);
  white-space: nowrap;
  border-width: 0;
}
