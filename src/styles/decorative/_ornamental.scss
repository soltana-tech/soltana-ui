// ---------------------------------------------------------------------------
// Ornament Tier System
// ---------------------------------------------------------------------------
// Tier-aware decorative elements: .frame, .corner, .edge, .divider,
// .medallion. Each auto-styles from [data-ornament] on <html> and
// supports per-element override via .ornament-{value} utility classes.
// SVG decorations use mask-image so --ornament-color propagates fully.
// ---------------------------------------------------------------------------

// ============================================================================
// ORNAMENTAL CSS VARIABLES
// ============================================================================

:root {
  --ornament-color: var(--accent-gold);
  --ornament-color-dark: color-mix(in srgb, var(--accent-gold), black 30%);
  --ornament-opacity: 0.5;
  --ornament-opacity-strong: 0.7;
  --ornament-size-sm: 12px;
  --ornament-size-md: 18px;
  --ornament-size-lg: 24px;
  --ornament-size-xl: 32px;
}

// ============================================================================
// MASK-IMAGE HELPER
// ============================================================================
// Converts SVG data URIs to masks so background-color (--ornament-color)
// controls the visible color. All SVGs use white strokes/fills as masks.

@mixin svg-mask($url, $size: contain, $repeat: no-repeat) {
  -webkit-mask-image: url($url);
  mask-image: url($url);
  -webkit-mask-size: $size;
  mask-size: $size;
  -webkit-mask-repeat: $repeat;
  mask-repeat: $repeat;
  background-color: var(--ornament-color);
}

// ============================================================================
// FRAME MIXINS — Full border treatments (one per tier)
// ============================================================================

@mixin frame-gilt {
  border: 2px solid var(--ornament-color);
  box-shadow:
    0 0 0 1px var(--ornament-color-dark),
    0 0 0 4px var(--surface-bg, #fff),
    0 0 0 5px var(--ornament-color),
    0 0 12px var(--border-accent-gold);

  &::before {
    content: '';
    position: absolute;
    inset: 2px;
    border: 1px solid var(--border-accent-gold);
    pointer-events: none;
  }
}

@mixin frame-baroque {
  border: 3px solid;
  border-image: linear-gradient(
      145deg,
      var(--ornament-color),
      color-mix(in srgb, var(--ornament-color), #8b6914 50%),
      color-mix(in srgb, var(--ornament-color), black 15%)
    )
    1;

  &::before {
    content: '';
    position: absolute;
    inset: 4px;
    border: 1px solid var(--border-accent-gold-strong);
    border-radius: 1px;
    pointer-events: none;
  }

  // Top center medallion
  &::after {
    content: '';
    position: absolute;
    top: -12px;
    left: 50%;
    transform: translateX(-50%);
    width: 24px;
    height: 24px;
    border-radius: 50%;
    border: 2px solid var(--ornament-color);
    background: var(--surface-1);
    box-shadow:
      0 0 8px var(--border-accent-gold),
      inset 0 0 4px var(--accent-gold-subtle);
    pointer-events: none;
  }
}

@mixin frame-beveled {
  border: 3px solid var(--border-strong);
  box-shadow:
    inset 3px 3px 8px rgb(var(--shadow-color) / 20%),
    inset -3px -3px 8px rgb(var(--highlight-color) / 50%);

  &::before {
    content: '';
    position: absolute;
    inset: -1px;
    border-radius: inherit;
    border: 1px solid rgb(255 255 255 / 12%);
    border-bottom-color: rgb(0 0 0 / 10%);
    border-right-color: rgb(0 0 0 / 10%);
    pointer-events: none;
  }
}

@mixin frame-faceted {
  border: 2px solid var(--ornament-color);
  clip-path: polygon(
    12px 0,
    calc(100% - 12px) 0,
    100% 12px,
    100% calc(100% - 12px),
    calc(100% - 12px) 100%,
    12px 100%,
    0 calc(100% - 12px),
    0 12px
  );

  &::before {
    content: '';
    position: absolute;
    inset: 4px;
    border: 1px solid var(--ornament-color);
    opacity: 0.4;
    clip-path: polygon(
      8px 0,
      calc(100% - 8px) 0,
      100% 8px,
      100% calc(100% - 8px),
      calc(100% - 8px) 100%,
      8px 100%,
      0 calc(100% - 8px),
      0 8px
    );
    pointer-events: none;
  }
}

// ============================================================================
// CORNER MIXINS — Decorative corner marks (one per tier)
// ============================================================================

@mixin corner-gilt {
  &::before,
  &::after {
    content: '';
    position: absolute;
    width: var(--ornament-size-md);
    height: var(--ornament-size-md);
    border-radius: 50%;
    border: 2px solid var(--ornament-color);
    box-shadow: inset 0 0 4px var(--border-accent-gold);
    opacity: var(--ornament-opacity);
    pointer-events: none;
  }

  &::before {
    top: 6px;
    left: 6px;
  }

  &::after {
    top: 6px;
    right: 6px;
  }
}

@mixin corner-baroque {
  &::before,
  &::after {
    content: '';
    position: absolute;
    width: var(--ornament-size-lg);
    height: var(--ornament-size-lg);
    @include svg-mask(
      "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath fill='none' stroke='white' stroke-width='1.5' d='M2 22Q8 18 12 12Q8 8 2 2 M22 2Q18 8 12 12'/%3E%3C/svg%3E"
    );
    opacity: var(--ornament-opacity);
    pointer-events: none;
  }

  &::before {
    top: 4px;
    left: 4px;
  }

  &::after {
    top: 4px;
    right: 4px;
    transform: scaleX(-1);
  }
}

@mixin corner-beveled {
  &::before,
  &::after {
    content: '';
    position: absolute;
    width: 24px;
    height: 24px;
    border-color: var(--border-strong);
    border-style: solid;
    box-shadow:
      1px 1px 0 rgb(255 255 255 / 15%),
      -1px -1px 0 rgb(0 0 0 / 8%);
    opacity: var(--ornament-opacity);
    pointer-events: none;
  }

  &::before {
    top: 8px;
    left: 8px;
    border-width: 3px 0 0 3px;
  }

  &::after {
    top: 8px;
    right: 8px;
    border-width: 3px 3px 0 0;
  }
}

@mixin corner-faceted {
  &::before,
  &::after {
    content: '';
    position: absolute;
    width: 12px;
    height: 12px;
    background-color: var(--ornament-color);
    clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%);
    opacity: var(--ornament-opacity);
    pointer-events: none;
  }

  &::before {
    top: 6px;
    left: 6px;
  }

  &::after {
    top: 6px;
    right: 6px;
  }
}

// ============================================================================
// EDGE MIXINS — Border enhancements (one per tier)
// ============================================================================

@mixin edge-gilt {
  border: 1px solid var(--ornament-color);
  box-shadow:
    inset 0 1px 0 rgb(254 243 199 / 30%),
    0 0 8px var(--border-accent-gold);
}

@mixin edge-baroque {
  border: 2px solid var(--border-default);

  &::before {
    content: '';
    position: absolute;
    inset: -6px;
    border: 4px dotted var(--ornament-color);
    border-radius: inherit;
    opacity: 0.3;
    pointer-events: none;
  }
}

@mixin edge-beveled {
  border: 2px solid var(--border-strong);

  &::before {
    content: '';
    position: absolute;
    inset: 0;
    border: 1px solid;
    border-color: rgb(255 255 255 / 20%) rgb(0 0 0 / 10%) rgb(0 0 0 / 10%) rgb(255 255 255 / 20%);
    pointer-events: none;
  }
}

@mixin edge-faceted {
  border: 2px solid var(--ornament-color);
  background-image: linear-gradient(
    135deg,
    rgb(255 255 255 / 6%) 25%,
    transparent 25%,
    transparent 50%,
    rgb(255 255 255 / 6%) 50%,
    rgb(255 255 255 / 6%) 75%,
    transparent 75%
  );
  background-size: 8px 8px;
}

// ============================================================================
// DIVIDER MIXINS — Horizontal separators (one per tier)
// ============================================================================

@mixin divider-none {
  height: 2px;
  background: linear-gradient(
    90deg,
    transparent,
    var(--ornament-color) 20%,
    var(--ornament-color) 80%,
    transparent
  );
  opacity: 0.4;

  &::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) rotate(45deg);
    width: 8px;
    height: 8px;
    background: var(--ornament-color);
    border-radius: 1px;
  }
}

@mixin divider-gilt {
  height: 28px;

  &::before {
    content: '';
    position: absolute;
    inset: 0;
    @include svg-mask(
      "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='240' height='28' viewBox='0 0 240 28'%3E%3Cpath fill='none' stroke='white' stroke-width='1' stroke-linecap='round' d='M20 14c0-6 6-10 12-6s6 12 0 12-12-6-12-12 M52 14c8-8 16 0 16 0s8 8 16 0 M100 8c4 0 6 3 6 6s-2 6-6 6-6-3-6-6 2-6 6-6 M120 14l4-6 4 6-4 6z M140 14c0-6 6-10 12-6s6 12 0 12-12-6-12-12 M172 14c8-8 16 0 16 0s8 8 16 0'/%3E%3Ccircle cx='120' cy='14' r='2' fill='white' opacity='0.7'/%3E%3Ccircle cx='20' cy='14' r='1.5' fill='white' opacity='0.4'/%3E%3Ccircle cx='220' cy='14' r='1.5' fill='white' opacity='0.4'/%3E%3C/svg%3E",
      $size: 240px 28px
    );
    -webkit-mask-position: center;
    mask-position: center;
  }
}

@mixin divider-baroque {
  height: 32px;

  &::before {
    content: '';
    position: absolute;
    inset: 0;
    @include svg-mask(
      "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='32' viewBox='0 0 200 32'%3E%3Cpath fill='none' stroke='white' stroke-width='1.5' stroke-linecap='round' d='M10 16c0-8 12-8 12 0s12 8 12 0-12-8-12 0 M56 16c0-8 12-8 12 0s12 8 12 0-12-8-12 0 M100 8l0 16 M122 16c0-8 12-8 12 0s12 8 12 0-12-8-12 0 M166 16c0-8 12-8 12 0s12 8 12 0-12-8-12 0'/%3E%3Ccircle cx='100' cy='16' r='4' fill='white' opacity='0.6'/%3E%3C/svg%3E",
      $size: 200px 32px
    );
    -webkit-mask-position: center;
    mask-position: center;
  }
}

@mixin divider-beveled {
  height: 24px;

  &::before {
    content: '';
    position: absolute;
    inset: 0;
    @include svg-mask(
      "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'%3E%3Cpath fill='none' stroke='white' stroke-width='1.5' d='M0 12h6v6h12v-12h-12v6'/%3E%3C/svg%3E",
      $size: 24px 24px,
      $repeat: repeat-x
    );
    -webkit-mask-position: center;
    mask-position: center;
    opacity: 0.6;
  }
}

@mixin divider-faceted {
  height: 20px;

  &::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 0;
    right: 0;
    height: 2px;
    background: var(--ornament-color);
    opacity: 0.4;
  }

  &::after {
    content: '';
    position: absolute;
    inset: 0;
    background-image: repeating-linear-gradient(
      90deg,
      transparent 0,
      transparent 20px,
      var(--ornament-color) 20px,
      var(--ornament-color) 28px,
      transparent 28px,
      transparent 36px
    );
    clip-path: polygon(
      0% 50%,
      4px 0%,
      calc(100% - 4px) 0%,
      100% 50%,
      calc(100% - 4px) 100%,
      4px 100%
    );
    opacity: 0.35;
  }
}

// ============================================================================
// MEDALLION MIXINS — Decorative focal points (one per tier)
// ============================================================================

@mixin medallion-gilt {
  border: 2px solid var(--ornament-color);
  box-shadow:
    0 0 0 4px var(--surface-bg),
    0 0 0 6px var(--border-accent-gold);
}

@mixin medallion-baroque {
  border: 2px solid var(--ornament-color);
  box-shadow:
    0 0 0 4px var(--surface-bg, #fff),
    0 0 0 6px var(--border-accent-gold),
    inset 0 0 12px var(--accent-gold-subtle);

  &::before {
    content: '';
    position: absolute;
    top: -16px;
    left: 50%;
    transform: translateX(-50%);
    width: 40px;
    height: 32px;
    @include svg-mask(
      "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='32' viewBox='0 0 40 32'%3E%3Cpath fill='none' stroke='white' stroke-width='1.5' d='M20 4L8 12L8 24L20 30L32 24L32 12Z'/%3E%3Cpath fill='none' stroke='white' stroke-width='1' opacity='0.5' d='M20 8L12 14L12 22L20 26L28 22L28 14Z'/%3E%3Ccircle cx='20' cy='17' r='3' fill='white' opacity='0.4'/%3E%3C/svg%3E"
    );
    -webkit-mask-repeat: no-repeat;
    mask-repeat: no-repeat;
    pointer-events: none;
    z-index: 2;
  }
}

@mixin medallion-beveled {
  border: 3px solid var(--border-strong);
  box-shadow:
    inset 2px 2px 6px rgb(var(--shadow-color) / 15%),
    inset -2px -2px 6px rgb(var(--highlight-color) / 40%),
    0 0 0 4px var(--surface-bg);
}

@mixin medallion-faceted {
  border: 2px solid var(--ornament-color);
  clip-path: polygon(50% 0%, 85% 15%, 100% 50%, 85% 85%, 50% 100%, 15% 85%, 0% 50%, 15% 15%);
}

// ============================================================================
// BASE ELEMENT CLASSES — Structural defaults
// ============================================================================

.frame {
  position: relative;
  padding: 1.5rem;
}

.corner {
  position: relative;
}

.edge {
  position: relative;
}

.divider {
  position: relative;
  width: 100%;
  @include divider-none;
}

.medallion {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 48px;
  height: 48px;
  border-radius: 50%;
  position: relative;
}

.medallion-lg {
  width: 64px;
  height: 64px;
}

// ============================================================================
// CONFIG-DEFAULT SELECTORS — Read [data-ornament] from <html>
// ============================================================================

// ---- gilt ----

[data-ornament='gilt'] .frame {
  @include frame-gilt;
}

[data-ornament='gilt'] .corner {
  @include corner-gilt;
}

[data-ornament='gilt'] .edge {
  @include edge-gilt;
}

[data-ornament='gilt'] .divider {
  @include divider-gilt;
}

[data-ornament='gilt'] .medallion {
  @include medallion-gilt;
}

// ---- baroque ----

[data-ornament='baroque'] .frame {
  @include frame-baroque;
}

[data-ornament='baroque'] .corner {
  @include corner-baroque;
}

[data-ornament='baroque'] .edge {
  @include edge-baroque;
}

[data-ornament='baroque'] .divider {
  @include divider-baroque;
}

[data-ornament='baroque'] .medallion {
  @include medallion-baroque;
}

// ---- beveled ----

[data-ornament='beveled'] .frame {
  @include frame-beveled;
}

[data-ornament='beveled'] .corner {
  @include corner-beveled;
}

[data-ornament='beveled'] .edge {
  @include edge-beveled;
}

[data-ornament='beveled'] .divider {
  @include divider-beveled;
}

[data-ornament='beveled'] .medallion {
  @include medallion-beveled;
}

// ---- faceted ----

[data-ornament='faceted'] .frame {
  @include frame-faceted;
}

[data-ornament='faceted'] .corner {
  @include corner-faceted;
}

[data-ornament='faceted'] .edge {
  @include edge-faceted;
}

[data-ornament='faceted'] .divider {
  @include divider-faceted;
}

[data-ornament='faceted'] .medallion {
  @include medallion-faceted;
}

// ============================================================================
// PER-ELEMENT OVERRIDES — Higher specificity than config-default
// ============================================================================

// ---- gilt ----
.ornament-gilt .frame,
.frame.ornament-gilt {
  @include frame-gilt;
}

.ornament-gilt .corner,
.corner.ornament-gilt {
  @include corner-gilt;
}

.ornament-gilt .edge,
.edge.ornament-gilt {
  @include edge-gilt;
}

.ornament-gilt .divider,
.divider.ornament-gilt {
  @include divider-gilt;
}

.ornament-gilt .medallion,
.medallion.ornament-gilt {
  @include medallion-gilt;
}

// ---- baroque ----
.ornament-baroque .frame,
.frame.ornament-baroque {
  @include frame-baroque;
}

.ornament-baroque .corner,
.corner.ornament-baroque {
  @include corner-baroque;
}

.ornament-baroque .edge,
.edge.ornament-baroque {
  @include edge-baroque;
}

.ornament-baroque .divider,
.divider.ornament-baroque {
  @include divider-baroque;
}

.ornament-baroque .medallion,
.medallion.ornament-baroque {
  @include medallion-baroque;
}

// ---- beveled ----
.ornament-beveled .frame,
.frame.ornament-beveled {
  @include frame-beveled;
}

.ornament-beveled .corner,
.corner.ornament-beveled {
  @include corner-beveled;
}

.ornament-beveled .edge,
.edge.ornament-beveled {
  @include edge-beveled;
}

.ornament-beveled .divider,
.divider.ornament-beveled {
  @include divider-beveled;
}

.ornament-beveled .medallion,
.medallion.ornament-beveled {
  @include medallion-beveled;
}

// ---- faceted ----
.ornament-faceted .frame,
.frame.ornament-faceted {
  @include frame-faceted;
}

.ornament-faceted .corner,
.corner.ornament-faceted {
  @include corner-faceted;
}

.ornament-faceted .edge,
.edge.ornament-faceted {
  @include edge-faceted;
}

.ornament-faceted .divider,
.divider.ornament-faceted {
  @include divider-faceted;
}

.ornament-faceted .medallion,
.medallion.ornament-faceted {
  @include medallion-faceted;
}

// ============================================================================
// COLUMN UTILITIES — Side border accents (not tier-dependent)
// ============================================================================

.ornament-column-left {
  border-left: 3px solid var(--border-accent-gold);
  padding-left: 1.5rem;
  position: relative;

  &::before {
    content: '';
    position: absolute;
    left: 6px;
    top: 0;
    bottom: 0;
    width: 1px;
    background: var(--accent-gold-subtle);
  }
}

.ornament-column-right {
  border-right: 3px solid var(--border-accent-gold);
  padding-right: 1.5rem;
  position: relative;

  &::after {
    content: '';
    position: absolute;
    right: 6px;
    top: 0;
    bottom: 0;
    width: 1px;
    background: var(--accent-gold-subtle);
  }
}

// ============================================================================
// ORNAMENT MODIFIERS — Intensity, metal, and size variations
// ============================================================================

// Intensity modifiers
.ornament-subtle {
  --ornament-opacity: 0.3;
}

.ornament-strong {
  --ornament-opacity: 0.7;
}

.ornament-bold {
  --ornament-opacity: 0.9;
}

// Metal color modifiers (inline hex — palette-specific by design)
.ornament-silver {
  --ornament-color: #929cb0;
}

.ornament-bronze {
  --ornament-color: #cd8d3a;
}

.ornament-copper {
  --ornament-color: #d97e4a;
}

.ornament-platinum {
  --ornament-color: #a8b3c7;
}

// Size modifiers
.ornament-sm {
  --ornament-size-sm: 8px;
  --ornament-size-md: 12px;
  --ornament-size-lg: 16px;
  --ornament-size-xl: 24px;
}

.ornament-lg {
  --ornament-size-sm: 16px;
  --ornament-size-md: 24px;
  --ornament-size-lg: 32px;
  --ornament-size-xl: 48px;
}
