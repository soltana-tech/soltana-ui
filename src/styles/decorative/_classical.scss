@use 'sass:math';

// ---------------------------------------------------------------------------
// Classical Layout Utilities
// ---------------------------------------------------------------------------
// Golden ratio spacing, column-inspired layouts, and architectural
// section elements (pediment, entablature, plinth).
// ---------------------------------------------------------------------------

// ---- Golden Ratio Spacing ----
// 1.618 : 1 ratio scale based on 1rem unit
$golden-ratio: 1.618;

// Exponent mapping: step 1 → φ⁻¹, step 2 → φ⁰ (base), step 3 → φ¹, ... step 6 → φ⁴
@for $i from 1 through 6 {
  .space-golden-#{$i} {
    --golden-space: #{math.pow($golden-ratio, $i - 2) * 1rem};
  }
}

// Golden ratio padding/margin utilities
.p-golden {
  padding: var(--golden-space, #{$golden-ratio * 1rem});
}

.px-golden {
  padding-left: var(--golden-space, #{$golden-ratio * 1rem});
  padding-right: var(--golden-space, #{$golden-ratio * 1rem});
}

.py-golden {
  padding-top: var(--golden-space, #{$golden-ratio * 1rem});
  padding-bottom: var(--golden-space, #{$golden-ratio * 1rem});
}

.m-golden {
  margin: var(--golden-space, #{$golden-ratio * 1rem});
}

.mx-golden {
  margin-left: var(--golden-space, #{$golden-ratio * 1rem});
  margin-right: var(--golden-space, #{$golden-ratio * 1rem});
}

.my-golden {
  margin-top: var(--golden-space, #{$golden-ratio * 1rem});
  margin-bottom: var(--golden-space, #{$golden-ratio * 1rem});
}

.gap-golden {
  gap: var(--golden-space, #{$golden-ratio * 1rem});
}

// ---- Golden Ratio Container ----
.ratio-golden {
  max-width: 100%;
  aspect-ratio: #{$golden-ratio} / 1;
}

.ratio-golden-portrait {
  max-width: 100%;
  aspect-ratio: 1 / #{$golden-ratio};
}

// ---- Classical Column Layout ----
// Multi-column layout with elegant proportions
.columns-classical {
  column-count: 2;
  column-gap: math.pow($golden-ratio, 2) * 1rem;
  column-rule: 1px solid var(--ornament-border);
}

.columns-classical-3 {
  column-count: 3;
  column-gap: math.pow($golden-ratio, 2) * 1rem;
  column-rule: 1px solid var(--ornament-border);
}

// ---- Pediment — triangular/arched top section ----
.pediment {
  position: relative;
  padding: math.pow($golden-ratio, 2) * 1rem $golden-ratio * 1rem $golden-ratio * 1rem;
  text-align: center;

  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 80%;
    height: 3px;
    background: linear-gradient(
      90deg,
      transparent,
      var(--ornament-color) 20%,
      color-mix(in srgb, var(--ornament-color), white 40%) 50%,
      var(--ornament-color) 80%,
      transparent
    );
    border-radius: 2px;
  }

  &::after {
    content: '';
    position: absolute;
    top: -6px;
    left: 50%;
    transform: translateX(-50%) rotate(45deg);
    width: 12px;
    height: 12px;
    background: var(--ornament-color);
    border-radius: 2px;
  }
}

// ---- Entablature — horizontal band (for headers/footers) ----
.entablature {
  position: relative;
  padding: 1rem $golden-ratio * 1rem;
  border-top: 2px solid var(--ornament-border-strong);
  border-bottom: 1px solid var(--ornament-border);

  &::before {
    content: '';
    position: absolute;
    top: -5px;
    left: 0;
    right: 0;
    height: 1px;
    background: var(--ornament-border);
  }
}

// ---- Plinth — base section ----
.plinth {
  padding: $golden-ratio * 1rem;
  background: var(--surface-2);
  border-top: 1px solid var(--border-default);
  position: relative;

  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 5%;
    right: 5%;
    height: 2px;
    background: linear-gradient(
      90deg,
      transparent,
      var(--ornament-color) 30%,
      var(--ornament-color) 70%,
      transparent
    );
    opacity: 0.3;
  }
}

// ---- Architectural Section ----
// Combines pediment (top) + content + plinth (base) pattern
.section-classical {
  position: relative;
  padding: math.pow($golden-ratio, 3) * 1rem $golden-ratio * 1rem;

  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 10%;
    right: 10%;
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--ornament-color), transparent);
    opacity: 0.3;
  }

  &::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 10%;
    right: 10%;
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--ornament-color), transparent);
    opacity: 0.2;
  }
}
