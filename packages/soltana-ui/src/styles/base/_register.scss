// ---------------------------------------------------------------------------
// Tier Registration Mixins
// ---------------------------------------------------------------------------
// Emit dual-selector blocks (data-attribute + utility class) for custom tier
// values from a single @content block.
// ---------------------------------------------------------------------------

// Theme: [data-theme] + .theme-* selectors (and optionally :root).
@mixin register-theme($name, $include-root: false) {
  @if $include-root {
    :root,
    [data-theme='#{$name}'],
    .theme-#{$name} {
      @content;
    }
  } @else {
    [data-theme='#{$name}'],
    .theme-#{$name} {
      @content;
    }
  }
}

// Relief: [data-relief] + .relief-* selectors.
@mixin register-relief($name) {
  [data-relief='#{$name}'],
  .relief-#{$name} {
    @content;
  }
}

// Finish: [data-finish] + .finish-* selectors.
@mixin register-finish($name) {
  [data-finish='#{$name}'],
  .finish-#{$name} {
    @content;
  }
}

// ---------------------------------------------------------------------------
// Shared Property Mixins
// ---------------------------------------------------------------------------

@mixin relief-container($shadow: var(--relief-shadow)) {
  border: 1px solid var(--relief-border);
  box-shadow: $shadow;
}

// The $bg default bridges the relief and finish tiers: --relief-bg is set by
// the active relief and falls back to var(--surface-1) when no relief is active.
@mixin finish-surface($bg: var(--relief-bg, var(--surface-1)), $gradient: null) {
  background-color: color-mix(
    in srgb,
    #{$bg} calc(var(--relief-opacity, 1) * var(--finish-opacity, 1) * 100%),
    transparent
  );
  @if $gradient {
    background-image:
      var(--finish-sheen, none),
      var(--finish-overlay, none),
      #{$gradient};
  } @else {
    background-image: var(--finish-sheen, none), var(--finish-overlay, none);
  }
  backdrop-filter: blur(var(--finish-blur, 0)) saturate(var(--finish-saturation, 100%));
}

@mixin mask($image, $size: null, $repeat: null, $position: null) {
  -webkit-mask-image: $image;
  mask-image: $image;
  @if $size {
    -webkit-mask-size: $size;
    mask-size: $size;
  }
  @if $repeat {
    -webkit-mask-repeat: $repeat;
    mask-repeat: $repeat;
  }
  @if $position {
    -webkit-mask-position: $position;
    mask-position: $position;
  }
}
